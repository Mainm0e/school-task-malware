package encryption

import (
	"crypto/sha256"
	"fmt"
	"os/exec"
	"strings"
)

// GenerateEncryptionKey generates an encryption key based on the current user's name
func GenerateEncryptionKey() ([]byte, error) {
	// Get the current user's name using the 'whoami' command
	cmd := exec.Command("whoami")
	output, err := cmd.Output()
	if err != nil {
		return nil, err
	}

	// Extract the username from the output
	username := strings.TrimSpace(string(output))

	// Hash the username using SHA-256
	hash := sha256.Sum256([]byte(username))

	// Use the hashed value as the encryption key
	key := hash[:16] // Adjust the key size as needed

	fmt.Println("Username: ", username)
	fmt.Println("Key: ", key)

	return key, nil
}
